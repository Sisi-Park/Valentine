<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />

<link href="https://fonts.googleapis.com/css2?family=Courier+Prime&family=Quicksand:wght@400;600&display=swap" rel="stylesheet">

<title>Will you be my Valentine?</title>

<style>
body{
  margin:0;
  min-height:100vh;
  display:grid;
  place-items:center;
  background:linear-gradient(135deg,#ffafbd,#ffc3a0);
  font-family:'Quicksand',sans-serif;
}

.card{
  width:min(620px,92vw);
  background:rgba(255,255,255,0.97);
  border-radius:30px;
  padding:45px 30px 40px;
  box-shadow:0 35px 90px rgba(0,0,0,0.25);
  text-align:center;
  overflow:hidden;
}

h1{
  margin:0 0 30px;
  font-size:34px;
  font-weight:600;
  color:#ff3e6c;
}

/* Envelope container */
.letter-wrap{
  display:flex;
  flex-direction:column;
  align-items:center;
  gap:25px;
  margin-bottom:30px;
  perspective:1000px;
}

/* Realistic envelope */
.envelope{
  width:280px;
  height:200px;
  position:relative;
  border:none;
  background:transparent;
  cursor:pointer;
  transform-style:preserve-3d;
  transition:transform .4s ease;
}

.envelope:hover{
  transform:rotateX(8deg);
}

/* Base */
.env-body{
  position:absolute;
  inset:0;
  background:#fffdf8;
  border-radius:8px;
  box-shadow:
    0 20px 60px rgba(0,0,0,0.25),
    inset 0 -4px 8px rgba(0,0,0,0.05);
}

/* Bottom triangle fold */
.env-bottom{
  position:absolute;
  bottom:0;
  left:0;
  right:0;
  height:100%;
  clip-path:polygon(0 0, 100% 0, 50% 65%);
  background:linear-gradient(to bottom,#f8f4ec,#ece6da);
  border-radius:8px;
}

/* Flap */
.env-flap{
  position:absolute;
  top:0;
  left:0;
  right:0;
  height:100%;
  clip-path:polygon(0 0, 100% 0, 50% 65%);
  background:linear-gradient(to bottom,#f2ede4,#e3dbcf);
  transform-origin:top;
  transform:rotateX(0deg);
  transition:transform 800ms cubic-bezier(.4,.2,.2,1);
  box-shadow:0 6px 12px rgba(0,0,0,0.08);
}

.envelope.open .env-flap{
  transform:rotateX(-160deg);
}

/* Seal */
.env-seal{
  position:absolute;
  left:50%;
  top:58%;
  transform:translate(-50%,-50%);
  font-size:34px;
  filter:drop-shadow(0 3px 4px rgba(0,0,0,0.2));
}

/* Letter box */
.letter{
  width:min(520px,92vw);
  background:#fffdf8;
  border-radius:8px;
  padding:30px;
  box-shadow:
    0 15px 40px rgba(0,0,0,0.2),
    inset 0 0 15px rgba(0,0,0,0.05);
  opacity:0;
  max-height:0;
  overflow:hidden;
  transition:opacity .6s ease,max-height .8s ease;

  font-family:'Courier Prime',monospace;
  font-size:20px;
  line-height:1.8;
  text-align:left;
  color:#222;
}

.letter.show{
  opacity:1;
  max-height:600px;
}

/* Typing cursor */
.cursor{
  display:inline-block;
  width:10px;
  margin-left:3px;
  animation:blink 1s steps(1) infinite;
}

@keyframes blink{
  50%{opacity:0;}
}

/* Heart burst */
.pop-heart{
  position:absolute;
  left:50%;
  top:40px;
  transform:translateX(-50%);
  animation:pop 1s ease forwards;
}

@keyframes pop{
  0%{opacity:0;transform:translate(-50%,0) scale(.5);}
  20%{opacity:1;}
  100%{opacity:0;transform:translate(calc(-50% + var(--dx)),var(--dy)) scale(1.4);}
}

/* Buttons */
.btns{
  display:flex;
  justify-content:center;
  gap:20px;
  margin-top:30px;
}

button.action{
  border:none;
  border-radius:999px;
  padding:15px 28px;
  font-size:18px;
  cursor:pointer;
  font-family:'Quicksand',sans-serif;
  transition:transform .3s ease;
}

#yes{
  background:#ff4d79;
  color:white;
}

#no{
  background:#f0f0f0;
  color:#333;
  position:relative;
}
</style>
</head>

<body>

<div class="card">
<h1 id="headline">Will you be my Valentine?</h1>

<div class="letter-wrap">

<button class="envelope" id="openLetter">
  <div class="env-body"></div>
  <div class="env-bottom"></div>
  <div class="env-flap"></div>
  <div class="env-seal">ðŸ’Œ</div>
</button>

<div class="letter" id="letter">
  <div id="typed"></div><span class="cursor">|</span>
</div>

</div>

<div class="btns">
<button class="action" id="yes">Yes ðŸ’˜</button>
<button class="action" id="no">No</button>
</div>
</div>

<script>
const params=new URLSearchParams(location.search);
const name=params.get("name");
if(name){
  document.getElementById("headline").textContent=
  name+", will you be my Valentine?";
}

const FULL_TEXT=
`Nick,

Thank you for showing me a kind of love I didn't know was possible.

Will you be my Valentine?`;

const openBtn=document.getElementById("openLetter");
const letter=document.getElementById("letter");
const typed=document.getElementById("typed");

function typeText(text,speed=28){
  let i=0;
  typed.textContent="";
  function tick(){
    typed.textContent+=text[i];
    i++;
    if(i<text.length){
      setTimeout(tick,speed);
    }
  }
  tick();
}

function burstHearts(){
  const hearts=["ðŸ’–","ðŸ’˜","ðŸ’•","â¤ï¸"];
  for(let i=0;i<18;i++){
    const h=document.createElement("div");
    h.className="pop-heart";
    h.textContent=hearts[Math.floor(Math.random()*hearts.length)];
    h.style.setProperty("--dx",(Math.random()*260-130)+"px");
    h.style.setProperty("--dy",(-Math.random()*220-80)+"px");
    openBtn.appendChild(h);
    setTimeout(()=>h.remove(),1000);
  }
}

openBtn.addEventListener("click",()=>{
  openBtn.classList.add("open");
  letter.classList.add("show");
  burstHearts();
  setTimeout(()=>typeText(FULL_TEXT),300);
});

const noBtn=document.getElementById("no");
const yesBtn=document.getElementById("yes");
let count=0;

function moveNo(){
  count++;
  yesBtn.style.transform=`scale(${1+count*0.15})`;
  noBtn.style.transform=`scale(${Math.max(0.3,1-count*0.12)})`;
  const x=Math.random()*200-100;
  const y=Math.random()*120-60;
  noBtn.style.position="relative";
  noBtn.style.left=x+"px";
  noBtn.style.top=y+"px";
}

noBtn.addEventListener("mouseenter",moveNo);
noBtn.addEventListener("touchstart",moveNo,{passive:true});

yesBtn.addEventListener("click",()=>{
  const q=name?`?name=${encodeURIComponent(name)}`:"";
  window.location.href=`yes.html${q}`;
});
</script>

</body>
</html>

