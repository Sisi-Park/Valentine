<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />

<link href="https://fonts.googleapis.com/css2?family=Quicksand:wght@400;600&family=Special+Elite&display=swap" rel="stylesheet">

<title>Will you be my Valentine?</title>

<style>
body{
  margin:0;
  min-height:100vh;
  display:grid;
  place-items:center;
  background:linear-gradient(135deg,#ffafbd,#ffc3a0);
  font-family:'Quicksand',sans-serif;
}

.card{
  width:min(640px,92vw);
  background:rgba(255,255,255,0.97);
  border-radius:30px;
  padding:44px 30px 40px;
  box-shadow:0 35px 95px rgba(0,0,0,0.25);
  text-align:center;
  overflow:hidden;
}

h1{
  margin:0 0 30px;
  font-size:34px;
  font-weight:600;
  color:#ff3e6c;
}

/* ---------- Envelope nudge text ---------- */
.letter-nudge{
  font-size:14px;
  font-weight:600;
  color:rgba(30,30,30,0.75);
  margin-bottom:12px;
  transform:rotate(-1deg);
}

/* ---------- 3D Envelope ---------- */
.letter-wrap{
  display:flex;
  flex-direction:column;
  align-items:center;
  gap:20px;
  margin-bottom:30px;
  perspective:1200px;
}

.envelope{
  width:320px;
  height:220px;
  position:relative;
  border:none;
  background:transparent;
  cursor:pointer;
  transform-style:preserve-3d;
  transition:transform .35s ease;
}

.envelope.shake{
  animation: envelopeShake 650ms ease-in-out infinite;
  transform-origin:50% 60%;
}

@keyframes envelopeShake{
  0%{transform:translateX(0) rotate(0);}
  20%{transform:translateX(-2px) rotate(-1deg);}
  40%{transform:translateX(2px) rotate(1deg);}
  60%{transform:translateX(-1px) rotate(-0.6deg);}
  80%{transform:translateX(1px) rotate(0.6deg);}
  100%{transform:translateX(0) rotate(0);}
}

.env-base{
  position:absolute;
  inset:0;
  border-radius:12px;
  background:linear-gradient(180deg,#fffdf8,#f2ebdf);
  box-shadow:0 26px 70px rgba(0,0,0,0.28), inset 0 -10px 18px rgba(0,0,0,0.06);
}

.env-left, .env-right, .env-bottom{
  position:absolute;
  inset:0;
  border-radius:12px;
}

.env-left{
  clip-path:polygon(0 0,52% 50%,0 100%);
  background:linear-gradient(135deg,rgba(0,0,0,0.06),transparent 65%);
}

.env-right{
  clip-path:polygon(100% 0,48% 50%,100% 100%);
  background:linear-gradient(225deg,rgba(0,0,0,0.06),transparent 65%);
}

.env-bottom{
  clip-path:polygon(0 100%,50% 52%,100% 100%);
  background:linear-gradient(0deg,rgba(0,0,0,0.09),transparent 70%);
}

.env-flap{
  position:absolute;
  inset:0;
  border-radius:12px;
  clip-path:polygon(0 0,100% 0,50% 58%);
  background:linear-gradient(180deg,#f7f0e6,#e6dccd);
  transform-origin:top center;
  transform:rotateX(0deg);
  transition:transform 880ms cubic-bezier(.25,.85,.2,1);
}

.envelope.open .env-flap{
  transform:rotateX(-165deg);
}

.env-seal{
  position:absolute;
  left:50%;
  top:56%;
  transform:translate(-50%,-50%);
  font-size:22px;
}

/* ---------- Letter ---------- */
.letter{
  width:min(560px,92vw);
  background:linear-gradient(180deg,#fffdf8,#f6efe3);
  border-radius:12px;
  padding:30px;
  box-shadow:0 18px 45px rgba(0,0,0,0.22);
  opacity:0;
  max-height:0;
  overflow:hidden;
  transition:opacity .55s ease, max-height .85s ease;
  text-align:left;
}

.letter.show{opacity:1;max-height:720px;}

.typed{
  font-family:'Special Elite',monospace;
  font-size:21px;
  line-height:1.75;
  color:#1f1f1f;
  white-space:pre-wrap;
  letter-spacing:0.3px;
}

.typed span{
  display:inline-block;
  transform:translateY(var(--jitterY));
  opacity:var(--ink);
}

.cursor{
  display:inline-block;
  width:10px;
  margin-left:3px;
  animation:blink 1s steps(1) infinite;
}

@keyframes blink{50%{opacity:0;}}

/* Buttons */
.btns{
  display:flex;
  justify-content:center;
  gap:20px;
  margin-top:30px;
}

button.action{
  border:none;
  border-radius:999px;
  padding:15px 28px;
  font-size:18px;
  cursor:pointer;
  font-family:'Quicksand',sans-serif;
  transition:transform .3s ease;
}

#yes{background:#ff4d79;color:#fff;}
#no{background:#f0f0f0;color:#333;position:relative;}

  /* Make letter text smaller on mobile only */
@media (max-width: 480px){
  .typed{
    font-size:18px;
    line-height:1.7;
  }
}
</style>
</head>

<body>
<div class="card">
<h1 id="headline">Will you be my Valentine?</h1>

<div class="letter-wrap">

<div class="letter-nudge">‚§µÔ∏è There‚Äôs a letter arrived for you Nick, open it ‚ù§Ô∏è</div>

<button class="envelope shake" id="openLetter">
  <div class="env-base"></div>
  <div class="env-left"></div>
  <div class="env-right"></div>
  <div class="env-bottom"></div>
  <div class="env-flap"></div>
  <div class="env-seal">üíå</div>
</button>

<div class="letter" id="letter">
  <div class="typed" id="typed"></div><span class="cursor" id="cursor">|</span>
</div>

</div>

<div class="btns">
<button class="action" id="yes">Yes üíò</button>
<button class="action" id="no">No</button>
</div>
</div>

<script>
const params=new URLSearchParams(location.search);
const name=params.get("name");
if(name){
document.getElementById("headline").textContent=name+", will you be my Valentine?";
}

const FULL_TEXT=
`Nick,

Thank you for showing me a kind of love I didn't know was possible.

Will you be my Valentineü•∞ü•∞?`;

const openBtn=document.getElementById("openLetter");
const letter=document.getElementById("letter");
const typed=document.getElementById("typed");
const cursor=document.getElementById("cursor");

function typeText(text){
let i=0;
typed.innerHTML="";
function tick(){
const span=document.createElement("span");
span.textContent=text[i];
span.style.setProperty("--jitterY",(Math.random()*0.8-0.4)+"px");
span.style.setProperty("--ink",(0.85+Math.random()*0.15));
typed.appendChild(span);
i++;
if(i<text.length){
let delay=25+Math.random()*40;
if(text[i]==="\n") delay=150;
setTimeout(tick,delay);
}else{
setTimeout(()=>cursor.style.display="none",900);
}
}
tick();
}

openBtn.addEventListener("click",()=>{
openBtn.classList.remove("shake");
openBtn.classList.add("open");
letter.classList.add("show");
setTimeout(()=>typeText(FULL_TEXT),300);
});

const noBtn=document.getElementById("no");
const yesBtn=document.getElementById("yes");
let count=0;

function moveNo(){
count++;
yesBtn.style.transform=`scale(${1+count*0.15})`;
noBtn.style.transform=`scale(${Math.max(0.3,1-count*0.12)})`;
const x=Math.random()*200-100;
const y=Math.random()*120-60;
noBtn.style.position="relative";
noBtn.style.left=x+"px";
noBtn.style.top=y+"px";
}

noBtn.addEventListener("mouseenter",moveNo);
noBtn.addEventListener("touchstart",moveNo,{passive:true});

yesBtn.addEventListener("click",()=>{
const q=name?`?name=${encodeURIComponent(name)}`:"";
window.location.href=`yes.html${q}`;
});
</script>
</body>
</html>
